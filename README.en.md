# 🎬 Movies API

[🇧🇷 Leia em Português](README.md)

![Status](https://img.shields.io/badge/status-In%20development-yellow)

API developed with Django Rest Framework to manage information about movies, genres, actors, and reviews. Includes JWT authentication, permission control, statistical endpoints, and a modular structure for scalability.

---

## 📦 Models and Fields

### 🎭 Genre
| Field   | Type                                | Description                        |
|---------|-------------------------------------|------------------------------------|
| `id`    | AutoField                           | Automatically generated by Django  |
| `name`  | CharField (max_length=200)          | Genre name                         |

### 🧑‍🎤 Actor
| Field        | Type                                                    | Description                        |
|--------------|---------------------------------------------------------|------------------------------------|
| `id`         | AutoField                                               | Automatically generated            |
| `name`       | CharField (max_length=200)                              | Actor's name                       |
| `birthdate`  | DateField (null=True, blank=True)                       | Date of birth                      |
| `nationality`| CharField (max_length=100, null=True, blank=True, choices=NATIONALTY_CHOICES) | Nationality |

### 🎬 Movie
| Field         | Type                                                   | Description                        |
|---------------|--------------------------------------------------------|------------------------------------|
| `id`          | AutoField                                              | Automatically generated            |
| `title`       | CharField (max_length=500)                             | Movie title                        |
| `genre`       | ForeignKey to Genre (on_delete=PROTECT, related_name='movies') | Movie genre            |
| `release_date`| DateField (null=True, blank=True)                      | Release date                       |
| `actors`      | ManyToManyField to Actor (related_name='movies')       | Movie actors                       |
| `resume`      | TextField (null=True, blank=True)                      | Movie summary                      |

### 🌟 Review
| Field     | Type                                                                  | Description            |
|-----------|-----------------------------------------------------------------------|------------------------|
| `id`      | AutoField                                                             | Automatically generated|
| `movie`   | ForeignKey to Movie (on_delete=PROTECT, related_name='reviews')       | Reviewed movie         |
| `stars`   | IntegerField (values from 0 to 5 with validators)                     | Star rating            |
| `comment` | TextField (null=True, blank=True)                                     | Comment                |

---

## 🔐 JWT Authentication

The API uses JSON Web Token (JWT) authentication.

```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework_simplejwt.authentication.JWTAuthentication',
    )
}
```

JWT Endpoints:

```python

POST /api/token/ – obtain token

POST /api/token/refresh/ – refresh token

POST /api/token/verify/ – verify token validity
```

⚙️ Implemented Features

✅ Views based on Generic Views

✅ Serializers using ModelSerializers

✅ Custom validations in serializers

✅ Use of SerializerMethodField for calculated fields

✅ Dynamic serializers for descriptive GET responses

✅ Override of get_serializer_class in views

✅ URL structure with versioning (/api/v1/)

✅ Include routes in individual apps

✅ Custom authentication app: authentication


📊 Statistical Endpoints


 - A statistics endpoint was created without using generic views.
   

🛡️ Permissions


- Use of DRF Permission Classes in all views.

- Implementation of a custom Global Permission Class.

- Action control based on HTTP method (view, add, change, delete).

🧩 URL Organization

* Each app has its own urls.py.

* The main file allows versioning:

```python
path("api/v1/", include("movies.urls"))
```

📥 Bulk Import with Custom Command

 - A custom command called actors_register was created to import actors from a file.

Example usage:

```bash
python manage.py actors_register --file data/actors.csv
The --file argument defines the path to the data file.
```

- The command parses and automatically registers actors in the database.

- Supports simple formats like CSV or JSON (depending on how you configure the parser).

🧪 Testing and Running

# Install dependencies

```bash
pip install -r requirements.txt
```

# Run local server

```bash
python manage.py runserver
```

🚀 Technologies Used

```
Python 3.10+

Django 4.x

Django Rest Framework

Simple JWT

PostgreSQL / SQLite

Validations with Django Validators

Custom commands with management commands
```

📫 Contact

- Project developed by Felipe Rodrigues Fonseca

📧 Email: comunidadehawks@gmail.com

🔗 GitHub: FelRFDev/movies_api
